/* src/components/WeatherData.css
   Restored interactive transitions + background variants + AQI badges
*/

/* ========== variables ========== */
:root {
    --card-radius: 14px;
    --interactive-ease: cubic-bezier(.2, .9, .3, 1);
    --shadow-strong: 0 18px 40px rgba(12, 14, 20, 0.08);
    --shadow-medium: 0 10px 26px rgba(12, 14, 20, 0.06);
}

/* ========== entry animation ========== */
@keyframes wd-cardIn {
    from {
        opacity: 0;
        transform: translateY(10px) scale(0.998);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.weather-card {
    animation: wd-cardIn 480ms var(--interactive-ease) both;
    will-change: transform, box-shadow;
    transition: transform 220ms var(--interactive-ease), box-shadow 220ms var(--interactive-ease);
}

/* ========== background variants (kept for gradients) ========== */
.bg-default {
    background: linear-gradient(180deg, #f7fafc 0%, #ffffff 100%);
}

.bg-clear {
    background: linear-gradient(180deg, #fef3c7 0%, #fff7ed 100%);
}

.bg-cloudy {
    background: linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%);
}

.bg-overcast {
    background: linear-gradient(180deg, #e6eef6 0%, #dfeaf7 100%);
}

.bg-rain {
    background: linear-gradient(180deg, rgba(225, 235, 242, 0.95), rgba(210, 220, 230, 0.95));
}

.bg-storm {
    background: linear-gradient(180deg, #cbd5e1 0%, #94a3b8 100%);
}

.bg-snow {
    background: linear-gradient(180deg, #f8fafc 0%, #eef2f7 100%);
}

.bg-fog {
    background: linear-gradient(180deg, #f3f4f6 0%, #e6e7ea 100%);
}

/* ========== micro-interactions (restored) ========== */

/* image micro-lift */
.weather-card img {
    transition: transform 240ms var(--interactive-ease), filter 240ms var(--interactive-ease);
    will-change: transform, filter;
}

.weather-card:hover img {
    transform: translateY(-6px) scale(1.04);
    filter: drop-shadow(0 12px 26px rgba(0, 0, 0, 0.08));
}

/* card hover lift */
.weather-card:hover {
    transform: translateY(-6px) scale(1.006);
    box-shadow: var(--shadow-strong);
}

/* unit and small buttons */
.unit-btn,
.small-btn {
    transition: transform 160ms var(--interactive-ease), box-shadow 160ms var(--interactive-ease), background 160ms var(--interactive-ease);
    will-change: transform, box-shadow, background;
}

.unit-btn:hover,
.small-btn:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-medium);
}

.unit-btn.active,
.small-btn.active {
    transform: translateY(-2px);
    box-shadow: var(--shadow-medium);
}

/* detail block hover lift */
.wd-detail-block {
    transition: transform 180ms var(--interactive-ease), box-shadow 180ms var(--interactive-ease), background 180ms var(--interactive-ease);
    will-change: transform, box-shadow;
}

.wd-detail-block:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-medium);
}

/* wind arrow smooth rotation */
.wind-arrow {
    transition: transform 420ms cubic-bezier(.2, .9, .3, 1);
}

/* AQI item hover */
.aqi-item {
    transition: transform 160ms var(--interactive-ease), box-shadow 160ms var(--interactive-ease);
}

.aqi-item:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-medium);
}

/* ========== AQI badge colors ========== */
.aq-good {
    background: #16a34a;
}

.aq-moderate {
    background: #f59e0b;
}

.aq-unhealthy-sg {
    background: #f97316;
}

.aq-unhealthy {
    background: #ef4444;
}

.aq-very-unhealthy {
    background: #b91c1c;
}

.aq-hazardous {
    background: #6b21a8;
}

.aq-unknown {
    background: #6b7280;
}

/* ========== small layout helpers ========== */
.weather-card,
.wd-detail-block,
.aqi-item {
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
}

/* subtle focus ring for keyboard users */
.unit-btn:focus-visible,
.small-btn:focus-visible,
.wd-detail-block:focus-within {
    outline: 3px solid rgba(99, 102, 241, 0.16);
    outline-offset: 2px;
}

/* ========== reduced motion support ========== */
@media (prefers-reduced-motion: reduce) {

    .weather-card,
    .weather-card img,
    .unit-btn,
    .small-btn,
    .wd-detail-block,
    .aqi-item,
    .wind-arrow {
        animation: none !important;
        transition: none !important;
        transform: none !important;
        box-shadow: none !important;
    }
}

/* ========== responsive tweaks ========== */
@media (max-width: 620px) {
    .wd-main {
        flex-direction: column;
        align-items: center;
    }

    .wd-condition {
        margin-top: 8px;
    }

    .wd-detail-block {
        min-width: 100%;
    }

    .aqi-grid {
        grid-template-columns: repeat(2, minmax(120px, 1fr));
        gap: 8px;
    }
}

/* Mobile fix: keep AQI badges & grid inside the card and prevent overflow.
   Paste into your WeatherData.css (or a global responsive CSS file).
*/

/* tablet / small phones */
@media (max-width: 620px) {

    /* Ensure AQI container has comfortable padding and does not let children overflow */
    .wd-aqi {
        padding: 12px 10px;
        box-sizing: border-box;
        overflow: hidden;
        /* prevents content visually spilling out of the card */
        position: relative;
    }

    /* Make the header a flexible row that can wrap so badges don't push outside */
    .aqi-header {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        justify-content: space-between;
        flex-wrap: wrap;
    }

    /* Allow badges to wrap and shrink on small screens */
    .aqi-indices {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
        margin-top: 4px;
    }

    /* Reduce badge size a little on mobile so they fit */
    .aqi-badge {
        font-size: 0.78rem;
        padding: 6px 8px;
        border-radius: 8px;
        line-height: 1;
        white-space: nowrap;
        flex-shrink: 0;
        position: relative;
        z-index: 1;
    }

    /* If badges still need more room, let them be full-width stacked */
    .aqi-indices.stacked,
    .aqi-indices.full-width {
        width: 100%;
        justify-content: center;
    }

    /* Make pollutant boxes 2 columns (already present but ensure spacing) */
    .aqi-grid {
        grid-template-columns: repeat(2, minmax(120px, 1fr));
        gap: 10px;
    }

    /* Ensure pollutant items don't overflow their container */
    .aqi-item {
        word-break: break-word;
        min-height: 44px;
        align-items: center;
    }

    /* Keep the note readable and within the card */
    .aqi-note {
        font-size: 0.85rem;
        line-height: 1.35;
        margin-top: 10px;
        color: rgba(15, 23, 36, 0.65);
    }
}

/* very small phones: stack badges vertically and center them */
@media (max-width: 420px) {
    .aqi-header {
        flex-direction: column;
        align-items: stretch;
        gap: 8px;
    }

    .aqi-indices {
        justify-content: center;
        width: 100%;
    }

    .aqi-badge {
        width: auto;
        min-width: 0;
        padding: 8px 10px;
        font-size: 0.78rem;
    }

    /* Make pollutant items slightly narrower and increase vertical spacing */
    .aqi-grid {
        grid-template-columns: repeat(2, minmax(110px, 1fr));
        gap: 8px;
    }

    .wd-aqi {
        padding-bottom: 14px;
    }
}

/* Accessibility: if reduced motion is requested, avoid layout shifts */
@media (prefers-reduced-motion: reduce) {

    .aqi-badge,
    .aqi-item,
    .aqi-grid,
    .wd-aqi {
        transition: none !important;
    }
}

/* === Mobile: Stack AQI pollutants vertically === */
@media (max-width: 520px) {
    .aqi-grid {
        display: grid;
        grid-template-columns: 1fr !important;
        /* force single column */
        gap: 10px;
    }

    .aqi-item {
        width: 100%;
        justify-content: space-between;
        padding: 12px 14px;
    }
}

/* ==== WeatherData: Responsive fixes for very small screens ==== */

/* ensure flex children can shrink (prevents min-width pushing layout out) */
@media (max-width: 820px) {
    .wd-main>* {
        min-width: 0;
        /* allow items to shrink inside flex */
    }
}

/* stack main columns, reduce font-sizes and image sizes on small screens */
@media (max-width: 620px) {
    .wd-main {
        flex-direction: column;
        align-items: center;
        gap: 12px;
    }

    /* allow temp column to shrink and center */
    .wd-temp {
        min-width: 0;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 6px 0;
    }

    /* smaller, responsive temperature number */
    .wd-temp-value {
        font-size: 48px;
        /* down from 64 */
        line-height: 1;
        word-break: normal;
    }

    /* unit toggle placed beside/below the temp without overflowing */
    .wd-unit-toggle {
        margin-top: 6px;
        flex-wrap: wrap;
        justify-content: center;
    }

    /* condition block becomes full width and centers its content */
    .wd-condition {
        min-width: 0;
        width: 100%;
        justify-content: center;
        gap: 12px;
        padding: 6px 0;
    }

    .wd-condition img {
        width: 48px;
        height: 48px;
        flex-shrink: 0;
    }

    .wd-cond-text {
        font-size: 1rem;
        overflow-wrap: anywhere;
    }

    .wd-stats-small {
        font-size: 0.875rem;
    }

    /* details stack vertically to avoid horizontal overflow */
    .wd-details {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
        width: 100%;
    }

    .wd-detail-block {
        min-width: 0;
        width: 100%;
    }

    /* AQI card/padding safe area */
    .wd-aqi {
        width: 100%;
        box-sizing: border-box;
        padding-left: 10px;
        padding-right: 10px;
    }
}

/* very narrow phones â€” squeeze a bit more */
@media (max-width: 420px) {
    .wd-temp-value {
        font-size: 40px;
    }

    .wd-condition img {
        width: 40px;
        height: 40px;
    }

    .wd-cond-text {
        font-size: 0.95rem;
    }

    .wd-stats-small {
        font-size: 0.82rem;
    }

    .wd-detail-block {
        padding: 10px;
    }
}

/* Extra safety for ultra-narrow displays */
@media (max-width: 360px) {
    .wd-temp-value {
        font-size: 36px;
    }

    .wd-unit-toggle .unit-btn {
        padding: 6px 8px;
        font-size: 0.9rem;
    }

    .wd-cond-text {
        white-space: normal;
    }
}